# Performance

## Learning Outcomes

## Restaurant Shiny

- Server =~ Restaurant
- User =~ Customer
- Request =~ Order
- R process =~ Chef

To make each chef more efficient

- Identify any slow steps
- Brainstorm to make them faster

To make the restaurant more efficient

- Hire more chefs
- Buy more restaurants

## Benchmarking

How does the app handle multiple users?

### Tools

- [shinyloadtest](https://rstudio.github.io/shinyloadtest/)
  - Run an app
  - Record how you interact with the app
  - [`shinycannon`](https://rstudio.github.io/shinyloadtest/#shinycannon): rerun the session
    multiple times
  - analyse the
    [log](https://rstudio.github.io/shinyloadtest/articles/analyzing-load-test-logs.html)
    of the reran sessions

```{r, eval = FALSE}
runApp("some_app.R")
shinyloadtest::record_session("http://127.0.0.1:9876")
# See "./recording.log"
```

```bash
shinycannon ./recording.log http://127.0.0.1:9876 \
  --workers 10 \
  --loaded-duration-minutes 5 \
  --output-dir run1
```

```{r, eval = FALSE}
library(shinyloadtest)
df <- load_runs("./run1")
shinyloadtest_report(df, "report.html")
```

## Profiling

### Tools

- profvis

## Optimisation

### Cacheing

### Other Optimisations

## Resources
